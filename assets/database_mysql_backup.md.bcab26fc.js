import{_ as s,o as a,c as l,O as o}from"./chunks/framework.08728be1.js";const A=JSON.parse('{"title":"数据库备份","description":"","frontmatter":{},"headers":[],"relativePath":"database/mysql/backup.md","filePath":"database/mysql/backup.md","lastUpdated":1712763671000}'),e={name:"database/mysql/backup.md"},n=o(`<h1 id="数据库备份" tabindex="-1">数据库备份 <a class="header-anchor" href="#数据库备份" aria-label="Permalink to &quot;数据库备份&quot;">​</a></h1><p>如果命令提示符显示<code>mysqldump</code>不是内部或者外部的命令，请在环境变量里的<code>Path</code>里添加路径：<code>C:\\Program Files\\MySQL\\MySQL Server 8.0\\bin</code>（因具体安装路径和版本而定）</p><h2 id="命令格式" tabindex="-1">命令格式 <a class="header-anchor" href="#命令格式" aria-label="Permalink to &quot;命令格式&quot;">​</a></h2><p><code>mysqldump [选项] 数据库名 [表名] &gt; 脚本名</code> 或 <code>mysqldump [选项] --数据库名 [选项 表名] &gt; 脚本名</code> 或 <code>mysqldump [选项] --all-databases [选项] &gt; 脚本名</code></p><h2 id="实例" tabindex="-1">实例 <a class="header-anchor" href="#实例" aria-label="Permalink to &quot;实例&quot;">​</a></h2><p>备份所有数据库：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mysqldump</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-uroot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--all-databases</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:</span><span style="color:#A6ACCD;">\\d</span><span style="color:#C3E88D;">btest.sql</span></span></code></pre></div><p>备份指定数据库：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mysqldump</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-uroot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:</span><span style="color:#A6ACCD;">\\d</span><span style="color:#C3E88D;">btest.sql</span></span></code></pre></div><p>备份指定数据库指定表(多个表以空格间隔)</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mysqldump</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-uroot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">db</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">event</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:</span><span style="color:#A6ACCD;">\\d</span><span style="color:#C3E88D;">btest.sql</span></span></code></pre></div><p>备份指定数据库排除某些表</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mysqldump</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-uroot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--ignore-table=test.t1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--ignore-table=test.t2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:</span><span style="color:#A6ACCD;">\\d</span><span style="color:#C3E88D;">btest.sql</span></span></code></pre></div><h3 id="注意" tabindex="-1">注意！ <a class="header-anchor" href="#注意" aria-label="Permalink to &quot;注意！&quot;">​</a></h3><p>Win10的PowerShell数据重定向文件编码为UTF16，使用--result-file=选项代替<code>&gt;</code>指定导出文件目录，这样由 mysqldump 命令本身导出的文件就可以避开由于终端编码问题导致的乱码原因了</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mysqldump</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-uroot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--ignore-table=test.t1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--ignore-table=test.t2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--result-file=D:</span><span style="color:#A6ACCD;">\\d</span><span style="color:#C3E88D;">btest.sql</span></span></code></pre></div><h1 id="数据库还原" tabindex="-1">数据库还原 <a class="header-anchor" href="#数据库还原" aria-label="Permalink to &quot;数据库还原&quot;">​</a></h1><h2 id="系统行命令" tabindex="-1">系统行命令 <a class="header-anchor" href="#系统行命令" aria-label="Permalink to &quot;系统行命令&quot;">​</a></h2><p>如果命令提示符显示<code>mysqladmin</code>不是内部或者外部的命令，请在环境变量里的<code>Path</code>里添加路径：<code>C:\\Program Files\\MySQL\\MySQL Server 8.0\\bin</code>（因具体安装路径和版本而定）</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mysqladmin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-uroot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dbtest</span></span>
<span class="line"><span style="color:#FFCB6B;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-uroot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dbtest</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:</span><span style="color:#A6ACCD;">\\d</span><span style="color:#C3E88D;">btest.sql</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 注：在导入备份数据库前，db_name如果没有，是需要创建的； 而且与db_name.db中数据库名是一样的才可以导入。</span></span></code></pre></div><h2 id="soure-方法" tabindex="-1">soure 方法 <a class="header-anchor" href="#soure-方法" aria-label="Permalink to &quot;soure 方法&quot;">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">mysql &gt; use dbtest</span></span>
<span class="line"><span style="color:#A6ACCD;">mysql &gt; source D:\\dbtest.sql</span></span></code></pre></div>`,22),p=[n];function t(c,r,C,y,d,i){return a(),l("div",null,p)}const h=s(e,[["render",t]]);export{A as __pageData,h as default};
